#
# Shell Options
#
# These routines deal with shell options: getting, setting,
# testing if set.
#
#     - flags (args on command line)
#     - shopts (shopt builtin)
#     - setopts (set -o)
#

option_flag_isset ()
{
	for ((n = 0; n < ${#-}; n++)); do
		test ${-:$n:1} == i &&
			return
	done
}

set_all_options ()
{
	set_all_shopts
	set_all_setopts
}

set_all_shopts ()
{
	for o in "${OPT_SHOPTS_UNSET[@]}"; do
		shopt -u $o
	done
	for o in "${OPT_SHOPTS_SET[@]}"; do
		shopt -s $o
	done
}

set_all_setopts ()
{
	for o in "${OPT_SETOPTS_UNSET[@]}"; do
		set +o $o
	done
	for o in "${OPT_SETOPTS_SET[@]}"; do
		set -o $o
	done
}

setopt_isset ()
{
	declare -a options

	IFS=: options=($SHELLOPTS)

	return array_ismember "${options[@]}"
}

shopt_isset ()
{
	declare -a options

	shopt -s |
	while read option setting; do
		addarr options $option
	done

	return array_ismember "${options[@]}"
}
